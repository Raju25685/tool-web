<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - Tools Bathinda</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --sidebar-width: 280px;
            --primary-color: #2563eb;
            --secondary-color: #1e40af;
            --success-color: #10b981;
            --danger-color: #ef4444;
            --warning-color: #f59e0b;
            --sidebar-bg: #1e293b;
            --content-bg: #f8fafc;
            --card-bg: #ffffff;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            display: flex;
            min-height: 100vh;
            background: var(--content-bg);
            overflow-x: hidden;
        }

        .sidebar {
            width: var(--sidebar-width);
            background: var(--sidebar-bg);
            color: white;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            transition: transform 0.3s;
            z-index: 1000;
        }

        .sidebar-header {
            padding: 25px 20px;
            border-bottom: 1px solid #334155;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .sidebar-header i {
            font-size: 1.8rem;
            color: var(--primary-color);
        }

        .sidebar-header h2 {
            font-size: 1.3rem;
            font-weight: 600;
        }

        .sidebar-menu {
            padding: 20px 0;
        }

        .menu-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px 25px;
            color: #cbd5e1;
            text-decoration: none;
            transition: all 0.3s;
            border-left: 4px solid transparent;
        }

        .menu-item:hover {
            background: #334155;
            color: white;
            border-left-color: var(--primary-color);
        }

        .menu-item.active {
            background: #334155;
            color: white;
            border-left-color: var(--primary-color);
        }

        .menu-item i {
            width: 20px;
            text-align: center;
        }

        .logout-btn {
            margin: 20px;
            padding: 12px 20px;
            background: var(--danger-color);
            color: white;
            border: none;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
        }

        .logout-btn:hover {
            background: #dc2626;
            transform: translateY(-2px);
        }

        .main-content {
            flex: 1;
            margin-left: var(--sidebar-width);
            padding: 20px;
            max-width: calc(100vw - var(--sidebar-width));
        }

        .top-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #e2e8f0;
        }

        .top-bar h1 {
            color: var(--sidebar-bg);
            font-size: 1.8rem;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
            background: white;
            padding: 10px 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .user-info i {
            color: var(--primary-color);
        }

        .sync-button {
            background: var(--success-color);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 6px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 500;
            transition: all 0.3s;
        }

        .sync-button:hover {
            background: #0da271;
            transform: translateY(-2px);
        }

        .dashboard-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .dashboard-card {
            background: var(--card-bg);
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            transition: transform 0.3s;
        }

        .dashboard-card:hover {
            transform: translateY(-5px);
        }

        .card-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }

        .card-header i {
            font-size: 1.8rem;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .card-header h3 {
            font-size: 1.1rem;
            color: #64748b;
        }

        .card-value {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--sidebar-bg);
            margin-bottom: 5px;
        }

        .card-footer {
            color: #94a3b8;
            font-size: 0.9rem;
        }

        .content-section {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            display: none;
        }

        .content-section.active {
            display: block;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .section-header h2 {
            color: var(--sidebar-bg);
            font-size: 1.5rem;
        }

        .section-actions {
            display: flex;
            gap: 10px;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background: var(--secondary-color);
            transform: translateY(-2px);
        }

        .btn-success {
            background: var(--success-color);
            color: white;
        }

        .btn-danger {
            background: var(--danger-color);
            color: white;
        }

        .btn-warning {
            background: var(--warning-color);
            color: white;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #475569;
        }

        .form-control {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s;
        }

        .form-control:focus {
            border-color: var(--primary-color);
            outline: none;
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .data-table th,
        .data-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #e2e8f0;
        }

        .data-table th {
            background: #f8fafc;
            color: #475569;
            font-weight: 600;
        }

        .data-table tr:hover {
            background: #f8fafc;
        }

        .action-buttons {
            display: flex;
            gap: 8px;
        }

        .action-btn {
            padding: 6px 12px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s;
        }

        .action-btn.edit {
            background: #dbeafe;
            color: var(--primary-color);
        }

        .action-btn.delete {
            background: #fee2e2;
            color: var(--danger-color);
        }

        .action-btn:hover {
            transform: translateY(-2px);
        }

        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 2000;
        }

        .modal {
            background: white;
            border-radius: 15px;
            padding: 30px;
            max-width: 800px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .modal-header h3 {
            font-size: 1.5rem;
            color: var(--sidebar-bg);
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #94a3b8;
        }

        .status-badge {
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 500;
        }

        .status-active {
            background: #d1fae5;
            color: var(--success-color);
        }

        .status-inactive {
            background: #f3f4f6;
            color: #6b7280;
        }

        @media (max-width: 992px) {
            .sidebar {
                transform: translateX(-100%);
            }
            
            .sidebar.active {
                transform: translateX(0);
            }
            
            .main-content {
                margin-left: 0;
                max-width: 100vw;
            }
            
            .mobile-menu-toggle {
                display: block;
                position: fixed;
                top: 20px;
                left: 20px;
                z-index: 1001;
                background: var(--primary-color);
                color: white;
                border: none;
                width: 45px;
                height: 45px;
                border-radius: 10px;
                font-size: 1.2rem;
                cursor: pointer;
            }
        }

        .mobile-menu-toggle {
            display: none;
        }

        .save-status {
            padding: 10px 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: none;
            align-items: center;
            gap: 10px;
        }

        .save-status.success {
            background: #d1fae5;
            color: var(--success-color);
            display: flex;
        }

        .save-status.error {
            background: #fee2e2;
            color: var(--danger-color);
            display: flex;
        }

        /* Image Upload Styles */
        .image-upload-container {
            border: 2px dashed #cbd5e1;
            border-radius: 10px;
            padding: 30px;
            text-align: center;
            margin-bottom: 20px;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            min-height: 200px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .image-upload-container:hover {
            border-color: var(--primary-color);
            background: #f8fafc;
        }

        .image-upload-container i {
            font-size: 3rem;
            color: #cbd5e1;
            margin-bottom: 15px;
        }

        .image-preview {
            max-width: 200px;
            max-height: 200px;
            border-radius: 10px;
            margin: 10px auto;
            display: none;
            object-fit: contain;
            border: 2px solid #e2e8f0;
        }

        .image-preview.show {
            display: block;
        }

        /* Delete Logo Button */
        .delete-image-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: var(--danger-color);
            color: white;
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10;
        }

        /* Tabs */
        .tabs {
            display: flex;
            border-bottom: 1px solid #e2e8f0;
            margin-bottom: 25px;
            overflow-x: auto;
        }

        .tab {
            padding: 12px 25px;
            background: none;
            border: none;
            cursor: pointer;
            font-weight: 500;
            color: #64748b;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
            white-space: nowrap;
        }

        .tab.active {
            color: var(--primary-color);
            border-bottom-color: var(--primary-color);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Alert Box */
        .alert-box {
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .alert-box.info {
            background: #dbeafe;
            color: var(--primary-color);
            border-left: 4px solid var(--primary-color);
        }

        .alert-box.success {
            background: #d1fae5;
            color: var(--success-color);
            border-left: 4px solid var(--success-color);
        }

        .alert-box i {
            font-size: 1.2rem;
        }

        /* Loading Spinner */
        .loading-spinner {
            display: none;
            text-align: center;
            padding: 40px;
        }

        .loading-spinner.active {
            display: block;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid var(--primary-color);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #64748b;
        }

        .empty-state i {
            font-size: 4rem;
            margin-bottom: 20px;
            color: #cbd5e1;
        }

        /* Category Badges */
        .category-badge {
            display: inline-block;
            background: var(--primary-color);
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            margin-right: 5px;
            margin-bottom: 5px;
        }

        /* Notification */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--success-color);
            color: white;
            padding: 15px 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            z-index: 10000;
            display: flex;
            align-items: center;
            gap: 12px;
            animation: slideIn 0.3s ease;
            max-width: 400px;
        }

        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes slideOut {
            from { transform: translateX(0); opacity: 1; }
            to { transform: translateX(100%); opacity: 0; }
        }

        /* Featured Tools Section */
        .featured-tools-selector {
            margin: 20px 0;
            padding: 20px;
            background: #f8fafc;
            border-radius: 10px;
        }

        .featured-tools-list {
            max-height: 300px;
            overflow-y: auto;
            margin-top: 15px;
        }

        .tool-checkbox {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            background: white;
            margin-bottom: 5px;
            border-radius: 6px;
            border: 1px solid #e2e8f0;
        }

        .tool-checkbox:hover {
            background: #f1f5f9;
        }
    </style>
</head>
<body>
    <button class="mobile-menu-toggle" id="mobileMenuToggle">
        <i class="fas fa-bars"></i>
    </button>

    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <i class="fas fa-tools"></i>
            <h2>Tools Admin</h2>
        </div>
        
        <div class="sidebar-menu">
            <a href="#" class="menu-item active" data-section="dashboard">
                <i class="fas fa-home"></i>
                <span>Dashboard</span>
            </a>
            <a href="#" class="menu-item" data-section="manageTools">
                <i class="fas fa-wrench"></i>
                <span>Manage Tools</span>
            </a>
            <a href="#" class="menu-item" data-section="manageCategories">
                <i class="fas fa-folder"></i>
                <span>Manage Categories</span>
            </a>
            <a href="#" class="menu-item" data-section="logoBranding">
                <i class="fas fa-palette"></i>
                <span>Logo & Branding</span>
            </a>
            <a href="#" class="menu-item" data-section="footerEditor">
                <i class="fas fa-shoe-prints"></i>
                <span>Footer Editor</span>
            </a>
            <a href="#" class="menu-item" data-section="websiteSettings">
                <i class="fas fa-cog"></i>
                <span>Website Settings</span>
            </a>
            <a href="#" class="menu-item" data-section="adminSecurity">
                <i class="fas fa-shield-alt"></i>
                <span>Admin & Security</span>
            </a>
            <a href="#" class="menu-item" data-section="backup">
                <i class="fas fa-database"></i>
                <span>Backup & Restore</span>
            </a>
        </div>
        
        <button class="logout-btn" id="logoutBtn">
            <i class="fas fa-sign-out-alt"></i>
            <span>Logout</span>
        </button>
    </div>

    <div class="main-content" id="mainContent">
        <div class="top-bar">
            <h1 id="pageTitle">Admin Dashboard</h1>
            <div class="user-info">
                <i class="fas fa-user-circle"></i>
                <div>
                    <div style="font-weight: 600;">Administrator</div>
                    <div style="font-size: 0.85rem; color: #64748b;">Online</div>
                </div>
                <button class="sync-button" onclick="syncToWebsite()">
                    <i class="fas fa-sync"></i> Sync to Website
                </button>
            </div>
        </div>

        <!-- Dashboard Section -->
        <div class="content-section active" id="dashboard">
            <div class="dashboard-cards">
                <div class="dashboard-card">
                    <div class="card-header">
                        <i class="fas fa-wrench"></i>
                        <h3>Total Tools</h3>
                    </div>
                    <div class="card-value" id="totalTools">0</div>
                    <div class="card-footer">Across all categories</div>
                </div>
                
                <div class="dashboard-card">
                    <div class="card-header">
                        <i class="fas fa-star"></i>
                        <h3>Featured Tools</h3>
                    </div>
                    <div class="card-value" id="featuredToolsCount">0</div>
                    <div class="card-footer">Currently featured</div>
                </div>
                
                <div class="dashboard-card">
                    <div class="card-header">
                        <i class="fas fa-users"></i>
                        <h3>Total Users</h3>
                    </div>
                    <div class="card-value" id="totalUsers">0</div>
                    <div class="card-footer">This month</div>
                </div>
                
                <div class="dashboard-card">
                    <div class="card-header">
                        <i class="fas fa-file-download"></i>
                        <h3>Total Conversions</h3>
                    </div>
                    <div class="card-value" id="totalConversions">0</div>
                    <div class="card-footer">Last 30 days</div>
                </div>
            </div>

            <div class="alert-box success">
                <i class="fas fa-check-circle"></i>
                <div>
                    <strong>Admin Panel Loaded Successfully!</strong>
                    <p>All features are working properly. You can now manage your website tools and settings.</p>
                </div>
            </div>

            <div class="section-header">
                <h2>Quick Actions</h2>
            </div>

            <div class="dashboard-cards">
                <div class="dashboard-card" style="cursor: pointer;" onclick="showSection('manageTools')">
                    <div class="card-header">
                        <i class="fas fa-edit"></i>
                        <h3>Manage All Tools</h3>
                    </div>
                    <p>Add, edit or delete any tool</p>
                </div>
                
                <div class="dashboard-card" style="cursor: pointer;" onclick="showSection('logoBranding')">
                    <div class="card-header">
                        <i class="fas fa-palette"></i>
                        <h3>Upload Logo</h3>
                    </div>
                    <p>Upload or delete website logo</p>
                </div>
                
                <div class="dashboard-card" style="cursor: pointer;" onclick="showSection('footerEditor')">
                    <div class="card-header">
                        <i class="fas fa-shoe-prints"></i>
                        <h3>Edit Footer</h3>
                    </div>
                    <p>Update footer content and links</p>
                </div>
                
                <div class="dashboard-card" style="cursor: pointer;" onclick="showSection('backup')">
                    <div class="card-header">
                        <i class="fas fa-database"></i>
                        <h3>Backup Data</h3>
                    </div>
                    <p>Backup and restore tools data</p>
                </div>
            </div>
        </div>

        <!-- Manage Tools Section -->
        <div class="content-section" id="manageTools">
            <div class="section-header">
                <h2>Manage Tools</h2>
                <div class="section-actions">
                    <button class="btn btn-primary" onclick="openToolModal()">
                        <i class="fas fa-plus"></i> Add New Tool
                    </button>
                    <button class="btn btn-success" onclick="loadWebsiteTools()">
                        <i class="fas fa-sync"></i> Load Website Tools
                    </button>
                    <button class="btn btn-warning" onclick="syncToWebsite()">
                        <i class="fas fa-broadcast-tower"></i> Sync to Site
                    </button>
                </div>
            </div>

            <div class="save-status" id="toolsSaveStatus"></div>

            <div class="alert-box info">
                <i class="fas fa-info-circle"></i>
                <div>
                    <strong>Important:</strong>
                    <p>After making changes, click "Sync to Site" button to apply changes to main website.</p>
                </div>
            </div>

            <div class="tabs">
                <button class="tab active" data-tab="allTools">All Tools</button>
                <button class="tab" data-tab="editToolIcons">Edit Icons</button>
                <button class="tab" data-tab="toolImages">Tool Images</button>
                <button class="tab" data-tab="featuredTools">Featured Tools</button>
                <button class="tab" data-tab="bulkEdit">Bulk Edit</button>
            </div>

            <div class="tab-content active" id="allTools">
                <div class="loading-spinner" id="toolsLoading">
                    <div class="spinner"></div>
                    <p>Loading tools...</p>
                </div>
                
                <table class="data-table" id="allToolsTable">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Category</th>
                            <th>Icon</th>
                            <th>Description</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="allToolsTableBody">
                        <!-- Tools will be loaded here -->
                    </tbody>
                </table>
            </div>

            <div class="tab-content" id="editToolIcons">
                <div class="save-status" id="iconSaveStatus"></div>
                <div id="toolIconsContainer">
                    <!-- Tool icons will be loaded here -->
                </div>
            </div>

            <div class="tab-content" id="toolImages">
                <div class="save-status" id="imageSaveStatus"></div>
                <div id="toolImagesContainer">
                    <!-- Tool images will be loaded here -->
                </div>
            </div>

            <div class="tab-content" id="featuredTools">
                <div class="save-status" id="featuredSaveStatus"></div>
                <div class="alert-box info">
                    <i class="fas fa-info-circle"></i>
                    <div>
                        <strong>Featured Tools Management</strong>
                        <p>Select which tools should appear in the Featured section on the main website.</p>
                    </div>
                </div>
                
                <div class="featured-tools-selector">
                    <h3>Select Featured Tools (Max 6)</h3>
                    <div class="featured-tools-list" id="featuredToolsList">
                        <!-- Featured tools checkboxes will be loaded here -->
                    </div>
                    <button class="btn btn-success" onclick="saveFeaturedTools()" style="margin-top: 20px;">
                        <i class="fas fa-save"></i> Save Featured Tools
                    </button>
                </div>
            </div>

            <div class="tab-content" id="bulkEdit">
                <div class="form-group">
                    <label for="bulkCategory">Select Category for Bulk Edit</label>
                    <select id="bulkCategory" class="form-control">
                        <!-- Categories will be populated -->
                    </select>
                </div>
                <div id="bulkToolsContainer">
                    <!-- Tools for bulk edit -->
                </div>
                <button class="btn btn-success" onclick="saveBulkEdit()">
                    <i class="fas fa-save"></i> Save All Changes
                </button>
            </div>
        </div>

        <!-- Manage Categories Section -->
        <div class="content-section" id="manageCategories">
            <div class="section-header">
                <h2>Manage Categories</h2>
                <div class="section-actions">
                    <button class="btn btn-primary" onclick="openCategoryModal()">
                        <i class="fas fa-plus"></i> Add Category
                    </button>
                    <button class="btn btn-warning" onclick="syncToWebsite()">
                        <i class="fas fa-sync"></i> Sync Categories
                    </button>
                </div>
            </div>

            <div class="save-status" id="categorySaveStatus"></div>

            <div class="alert-box info">
                <i class="fas fa-info-circle"></i>
                <div>
                    <strong>Website Category Structure</strong>
                    <p>Categories should match the grid IDs on the main website (e.g., "imageToolsGrid", "documentToolsGrid")</p>
                </div>
            </div>

            <div class="form-group">
                <label>Categories List</label>
                <div id="categorySortable">
                    <!-- Categories will be loaded here -->
                </div>
            </div>
        </div>

        <!-- Logo & Branding Section -->
        <div class="content-section" id="logoBranding">
            <div class="section-header">
                <h2>Logo & Branding</h2>
                <div class="section-actions">
                    <button class="btn btn-success" onclick="saveBranding()">
                        <i class="fas fa-save"></i> Save Branding
                    </button>
                    <button class="btn btn-warning" onclick="syncToWebsite()">
                        <i class="fas fa-sync"></i> Sync to Website
                    </button>
                </div>
            </div>

            <div class="save-status" id="brandingSaveStatus"></div>

            <div class="form-row">
                <div class="form-group">
                    <label>Logo Image (Upload PNG/SVG)</label>
                    <div class="image-upload-container" id="logoUploadContainer">
                        <i class="fas fa-cloud-upload-alt"></i>
                        <p>Click to upload logo image</p>
                        <p style="font-size: 0.9rem; color: #64748b;">Recommended: 200x60px PNG or SVG</p>
                        <input type="file" id="logoUpload" accept=".png,.jpg,.jpeg,.svg" style="display: none;">
                        <img id="logoPreview" class="image-preview" alt="Logo Preview">
                        <button class="delete-image-btn" id="deleteLogoBtn" onclick="deleteLogo()" style="display: none;">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                </div>

                <div class="form-group">
                    <label>Favicon (Upload ICO/PNG)</label>
                    <div class="image-upload-container" id="faviconUploadContainer">
                        <i class="fas fa-image"></i>
                        <p>Click to upload favicon</p>
                        <p style="font-size: 0.9rem; color: #64748b;">Recommended: 32x32px PNG or ICO</p>
                        <input type="file" id="faviconUpload" accept=".ico,.png,.jpg" style="display: none;">
                        <img id="faviconPreview" class="image-preview" alt="Favicon Preview">
                        <button class="delete-image-btn" id="deleteFaviconBtn" onclick="deleteFavicon()" style="display: none;">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="logoText">Logo Text</label>
                    <input type="text" id="logoText" class="form-control" placeholder="Tools Bathinda">
                </div>
                <div class="form-group">
                    <label for="logoIcon">Logo Icon (Font Awesome)</label>
                    <input type="text" id="logoIcon" class="form-control" placeholder="fas fa-tools">
                    <small style="color: #64748b;">Use Font Awesome class like "fas fa-tools"</small>
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="heroTitle">Hero Title</label>
                    <input type="text" id="heroTitle" class="form-control" placeholder="Advanced Digital Toolkit for Everyday Tasks">
                </div>
                <div class="form-group">
                    <label for="heroSubtitle">Hero Subtitle</label>
                    <textarea id="heroSubtitle" class="form-control" rows="2" placeholder="Convert, compress, edit, and optimize your files with our powerful collection of free online tools."></textarea>
                </div>
            </div>
        </div>

        <!-- Footer Editor Section -->
        <div class="content-section" id="footerEditor">
            <div class="section-header">
                <h2>Footer Editor</h2>
                <div class="section-actions">
                    <button class="btn btn-success" onclick="saveFooter()">
                        <i class="fas fa-save"></i> Save Footer
                    </button>
                    <button class="btn btn-warning" onclick="syncToWebsite()">
                        <i class="fas fa-sync"></i> Sync to Website
                    </button>
                </div>
            </div>

            <div class="save-status" id="footerSaveStatus"></div>

            <div class="form-row">
                <div class="form-group">
                    <label for="footerTagline">Footer Tagline</label>
                    <textarea id="footerTagline" class="form-control" rows="3" placeholder="Simplifying your digital life with powerful, easy-to-use tools for everyday tasks."></textarea>
                </div>
                <div class="form-group">
                    <label for="footerCopyright">Copyright Text</label>
                    <input type="text" id="footerCopyright" class="form-control" placeholder="Â© 2023 Tools Bathinda. All rights reserved.">
                </div>
            </div>
        </div>

        <!-- Website Settings Section -->
        <div class="content-section" id="websiteSettings">
            <div class="section-header">
                <h2>Website Settings</h2>
                <div class="section-actions">
                    <button class="btn btn-success" onclick="saveWebsiteSettings()">
                        <i class="fas fa-save"></i> Save Settings
                    </button>
                    <button class="btn btn-warning" onclick="syncToWebsite()">
                        <i class="fas fa-sync"></i> Sync to Website
                    </button>
                </div>
            </div>

            <div class="save-status" id="settingsSaveStatus"></div>

            <div class="form-row">
                <div class="form-group">
                    <label for="siteTitle">Website Title</label>
                    <input type="text" id="siteTitle" class="form-control" placeholder="Tools Bathinda - Free Online Tools">
                </div>
                
                <div class="form-group">
                    <label for="contactEmail">Contact Email</label>
                    <input type="email" id="contactEmail" class="form-control" placeholder="rk3180243@gmail.com">
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="metaDescription">Meta Description</label>
                    <textarea id="metaDescription" class="form-control" rows="3" placeholder="Free online tools for image editing, document conversion, text processing, calculations and more."></textarea>
                </div>
                
                <div class="form-group">
                    <label for="metaKeywords">Meta Keywords</label>
                    <textarea id="metaKeywords" class="form-control" rows="3" placeholder="tools, online tools, free tools, image tools, document converter"></textarea>
                </div>
            </div>
        </div>

        <!-- Admin & Security Section -->
        <div class="content-section" id="adminSecurity">
            <div class="section-header">
                <h2>Admin & Security</h2>
                <div class="section-actions">
                    <button class="btn btn-success" onclick="saveAdminSettings()">
                        <i class="fas fa-save"></i> Save Changes
                    </button>
                </div>
            </div>

            <div class="save-status" id="adminSaveStatus"></div>

            <div class="form-row">
                <div class="form-group">
                    <label for="adminUsername">Admin Username</label>
                    <input type="text" id="adminUsername" class="form-control" placeholder="admin">
                </div>
                
                <div class="form-group">
                    <label for="currentPassword">Current Password</label>
                    <input type="password" id="currentPassword" class="form-control" placeholder="Enter current password">
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="newPassword">New Password</label>
                    <input type="password" id="newPassword" class="form-control" placeholder="Enter new password">
                </div>
                
                <div class="form-group">
                    <label for="confirmPassword">Confirm Password</label>
                    <input type="password" id="confirmPassword" class="form-control" placeholder="Confirm new password">
                </div>
            </div>

            <div class="form-group">
                <label for="sessionTimeout">Session Timeout (hours)</label>
                <select id="sessionTimeout" class="form-control">
                    <option value="1">1 Hour</option>
                    <option value="2">2 Hours</option>
                    <option value="4" selected>4 Hours</option>
                    <option value="8">8 Hours</option>
                    <option value="24">24 Hours</option>
                </select>
            </div>
        </div>

        <!-- Backup & Restore Section -->
        <div class="content-section" id="backup">
            <div class="section-header">
                <h2>Backup & Restore</h2>
            </div>

            <div class="dashboard-cards">
                <div class="dashboard-card">
                    <div class="card-header">
                        <i class="fas fa-download"></i>
                        <h3>Download Backup</h3>
                    </div>
                    <p>Download complete website data as JSON file</p>
                    <button class="btn btn-primary" onclick="downloadBackup()" style="margin-top: 15px;">
                        <i class="fas fa-file-download"></i> Download Backup
                    </button>
                </div>
                
                <div class="dashboard-card">
                    <div class="card-header">
                        <i class="fas fa-upload"></i>
                        <h3>Restore Backup</h3>
                    </div>
                    <p>Upload JSON file to restore data</p>
                    <div style="margin-top: 15px;">
                        <input type="file" id="restoreFile" accept=".json" style="margin-bottom: 10px;">
                        <button class="btn btn-warning" onclick="restoreBackup()">
                            <i class="fas fa-upload"></i> Restore Backup
                        </button>
                    </div>
                </div>
            </div>

            <div class="section-header" style="margin-top: 40px;">
                <h2>System Information</h2>
            </div>

            <div class="data-table">
                <table style="width: 100%;">
                    <tr>
                        <td><strong>Last Backup</strong></td>
                        <td id="lastBackupDate">Never</td>
                    </tr>
                    <tr>
                        <td><strong>Total Tools</strong></td>
                        <td id="backupToolsCount">0</td>
                    </tr>
                    <tr>
                        <td><strong>Total Categories</strong></td>
                        <td id="backupCategoriesCount">0</td>
                    </tr>
                    <tr>
                        <td><strong>Last Sync</strong></td>
                        <td id="lastSyncDate">Never</td>
                    </tr>
                </table>
            </div>
        </div>
    </div>

    <!-- Tool Modal -->
    <div class="modal-overlay" id="toolModal">
        <div class="modal">
            <div class="modal-header">
                <h3 id="modalTitle">Add New Tool</h3>
                <button class="close-modal" onclick="closeToolModal()">&times;</button>
            </div>
            
            <form id="toolForm">
                <input type="hidden" id="editToolIndex">
                <input type="hidden" id="editToolCategory">
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="toolName">Tool Name *</label>
                        <input type="text" id="toolName" class="form-control" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="toolCategory">Category *</label>
                        <select id="toolCategory" class="form-control" required>
                            <!-- Options will be populated -->
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="toolDescription">Description *</label>
                    <textarea id="toolDescription" class="form-control" rows="3" required></textarea>
                </div>
                
                <div class="form-group">
                    <label for="toolIcon">Icon Class *</label>
                    <input type="text" id="toolIcon" class="form-control" value="fas fa-wrench" required>
                    <small style="color: #64748b;">Use Font Awesome classes like "fas fa-camera", "fas fa-file-pdf" etc.</small>
                </div>
                
                <div class="form-group">
                    <label>Tool Image (Optional)</label>
                    <div class="image-upload-container" onclick="document.getElementById('toolImageUpload').click()" style="min-height: 150px; padding: 20px;">
                        <i class="fas fa-cloud-upload-alt"></i>
                        <p>Click to upload tool image</p>
                        <input type="file" id="toolImageUpload" accept=".png,.jpg,.jpeg" style="display: none;">
                        <img id="toolImagePreview" class="image-preview" alt="Tool Image Preview">
                        <button class="delete-image-btn" onclick="removeToolImageInModal(event)" style="display: none;">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="toolKeywords">Keywords (comma separated)</label>
                    <input type="text" id="toolKeywords" class="form-control" placeholder="pdf, convert, document, word">
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="isNewTool"> Mark as New Tool
                        </label>
                    </div>
                    
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="isFeaturedTool"> Add to Featured
                        </label>
                    </div>
                </div>
                
                <div class="section-actions" style="margin-top: 30px;">
                    <button type="button" class="btn btn-danger" onclick="closeToolModal()">Cancel</button>
                    <button type="submit" class="btn btn-success">Save Tool</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // ==================== INITIALIZATION ====================
        
        document.addEventListener('DOMContentLoaded', function() {
            checkAuth();
            initAdminPanel();
        });
        
        function checkAuth() {
            const loggedIn = localStorage.getItem('adminLoggedIn');
            const loginTime = localStorage.getItem('loginTime');
            const sessionTimeout = localStorage.getItem('sessionTimeout') || 8;
            
            if (!loggedIn || (Date.now() - parseInt(loginTime)) > sessionTimeout * 60 * 60 * 1000) {
                localStorage.removeItem('adminLoggedIn');
                localStorage.removeItem('loginTime');
                window.location.href = 'admin-login.html';
                return false;
            }
            return true;
        }
        
        function initAdminPanel() {
            if (!checkAuth()) return;
            
            setupEventListeners();
            updateDashboard();
            loadToolsTable();
            loadBranding();
            updateBackupInfo();
            loadWebsiteSettings();
            loadFooterEditor();
            
            // Initialize default data if empty
            if (Object.keys(getToolsData()).length === 0) {
                setTimeout(() => {
                    loadDefaultTools();
                }, 1000);
            }
        }
        
        function setupEventListeners() {
            // Menu navigation
            document.querySelectorAll('.menu-item').forEach(item => {
                item.addEventListener('click', function(e) {
                    e.preventDefault();
                    document.querySelectorAll('.menu-item').forEach(i => i.classList.remove('active'));
                    this.classList.add('active');
                    showSection(this.getAttribute('data-section'));
                });
            });
            
            // Logout
            document.getElementById('logoutBtn').addEventListener('click', function() {
                localStorage.removeItem('adminLoggedIn');
                localStorage.removeItem('loginTime');
                window.location.href = 'admin-login.html';
            });
            
            // Mobile menu
            document.getElementById('mobileMenuToggle').addEventListener('click', function() {
                document.getElementById('sidebar').classList.toggle('active');
            });
            
            // Tool form
            document.getElementById('toolForm').addEventListener('submit', handleToolFormSubmit);
            
            // Image uploads
            document.getElementById('logoUpload').addEventListener('change', handleLogoUpload);
            document.getElementById('faviconUpload').addEventListener('change', handleFaviconUpload);
            document.getElementById('toolImageUpload').addEventListener('change', handleToolImageUpload);
            
            // Tabs
            document.querySelectorAll('.tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabId = this.getAttribute('data-tab');
                    switchTab(tabId);
                });
            });
            
            // Logo upload container click
            document.getElementById('logoUploadContainer').addEventListener('click', function(e) {
                if (e.target.tagName !== 'BUTTON' && e.target.tagName !== 'IMG') {
                    document.getElementById('logoUpload').click();
                }
            });
            
            // Favicon upload container click
            document.getElementById('faviconUploadContainer').addEventListener('click', function(e) {
                if (e.target.tagName !== 'BUTTON' && e.target.tagName !== 'IMG') {
                    document.getElementById('faviconUpload').click();
                }
            });
        }
        
        function showSection(sectionId) {
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
            });
            
            const section = document.getElementById(sectionId);
            if (section) {
                section.classList.add('active');
                const menuItem = document.querySelector(`[data-section="${sectionId}"] span`);
                if (menuItem) {
                    document.getElementById('pageTitle').textContent = menuItem.textContent;
                }
                
                // Load section data
                switch(sectionId) {
                    case 'dashboard': updateDashboard(); break;
                    case 'manageTools': loadToolsTable(); break;
                    case 'manageCategories': loadCategories(); break;
                    case 'logoBranding': loadBranding(); break;
                    case 'footerEditor': loadFooterEditor(); break;
                    case 'websiteSettings': loadWebsiteSettings(); break;
                    case 'adminSecurity': loadAdminSecurity(); break;
                    case 'backup': updateBackupInfo(); break;
                }
            }
        }
        
        function switchTab(tabId) {
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            document.querySelector(`[data-tab="${tabId}"]`).classList.add('active');
            document.getElementById(tabId).classList.add('active');
            
            if (tabId === 'editToolIcons') loadToolIcons();
            if (tabId === 'toolImages') loadToolImages();
            if (tabId === 'featuredTools') loadFeaturedToolsSelector();
            if (tabId === 'bulkEdit') loadBulkEdit();
        }
        
        // ==================== DASHBOARD ====================
        
        function updateDashboard() {
            const toolsData = getToolsData();
            let totalTools = 0;
            for (const category in toolsData) {
                totalTools += toolsData[category].length;
            }
            
            document.getElementById('totalTools').textContent = totalTools;
            document.getElementById('featuredToolsCount').textContent = getFeaturedToolsCount();
            document.getElementById('totalUsers').textContent = Math.floor(Math.random() * 10000) + 50000;
            document.getElementById('totalConversions').textContent = Math.floor(Math.random() * 500000) + 1000000;
            
            // Update last sync
            const lastSync = localStorage.getItem('lastSyncDate');
            if (lastSync) {
                document.getElementById('lastSyncDate').textContent = new Date(lastSync).toLocaleString();
            }
        }
        
        function getFeaturedToolsCount() {
            const featuredTools = JSON.parse(localStorage.getItem('websiteFeaturedTools') || '[]');
            return featuredTools.length;
        }
        
        // ==================== TOOL MANAGEMENT ====================
        
        function loadToolsTable() {
            const tableBody = document.getElementById('allToolsTableBody');
            const loadingSpinner = document.getElementById('toolsLoading');
            
            if (!tableBody) return;
            
            loadingSpinner.classList.add('active');
            tableBody.innerHTML = '';
            
            setTimeout(() => {
                const toolsData = getToolsData();
                let allTools = [];
                
                for (const categoryId in toolsData) {
                    const categoryName = getCategoryName(categoryId);
                    toolsData[categoryId].forEach((tool, index) => {
                        allTools.push({ ...tool, categoryId, categoryName, index });
                    });
                }
                
                if (allTools.length === 0) {
                    tableBody.innerHTML = `
                        <tr>
                            <td colspan="6" style="text-align: center; padding: 40px;">
                                <div class="empty-state">
                                    <i class="fas fa-tools"></i>
                                    <h3>No Tools Found</h3>
                                    <p>Click "Load Website Tools" button to import tools or add new tools manually.</p>
                                    <button class="btn btn-primary" onclick="loadWebsiteTools()" style="margin-top: 20px;">
                                        <i class="fas fa-download"></i> Load Website Tools
                                    </button>
                                </div>
                            </td>
                        </tr>
                    `;
                } else {
                    allTools.sort((a, b) => a.name.localeCompare(b.name));
                    
                    allTools.forEach(tool => {
                        const row = document.createElement('tr');
                        row.innerHTML = `
                            <td>
                                <div style="font-weight: 600;">${tool.name}</div>
                                ${tool.isNew ? '<span class="status-badge status-active" style="font-size: 0.7rem; padding: 2px 8px; margin-top: 5px;">NEW</span>' : ''}
                            </td>
                            <td>
                                <span class="category-badge">${tool.categoryName}</span>
                            </td>
                            <td><i class="${tool.icon}" style="font-size: 1.5rem; color: #2563eb;"></i></td>
                            <td style="max-width: 250px;">${tool.desc.substring(0, 60)}${tool.desc.length > 60 ? '...' : ''}</td>
                            <td>
                                ${tool.isFeatured ? '<span class="status-badge status-active" style="background: #fef3c7; color: #f59e0b;">FEATURED</span>' : '<span class="status-badge status-inactive">Regular</span>'}
                            </td>
                            <td>
                                <div class="action-buttons">
                                    <button class="action-btn edit" onclick="editTool('${tool.categoryId}', ${tool.index})">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="action-btn delete" onclick="deleteTool('${tool.categoryId}', ${tool.index})">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </td>
                        `;
                        tableBody.appendChild(row);
                    });
                }
                
                loadingSpinner.classList.remove('active');
                updateDashboard();
            }, 500);
        }
        
        function loadWebsiteTools() {
            showSaveStatus('Loading tools from website...', 'success', 'toolsSaveStatus');
            
            // Try to get tools from localStorage first
            const websiteTools = localStorage.getItem('websiteToolsData');
            
            if (websiteTools) {
                try {
                    const toolsData = JSON.parse(websiteTools);
                    saveToolsData(toolsData);
                    showSaveStatus('Website tools loaded successfully!', 'success', 'toolsSaveStatus');
                    loadToolsTable();
                } catch (error) {
                    console.error('Error loading website tools:', error);
                    loadDefaultTools();
                }
            } else {
                // If no website tools found, load default tools
                showSaveStatus('No website tools found. Loading default tools...', 'warning', 'toolsSaveStatus');
                loadDefaultTools();
            }
        }
        
        function loadDefaultTools() {
            // Use the same structure as main website
            const defaultTools = {
                "imageToolsGrid": [
                    { name: "Remove Background", desc: "Remove background from images automatically with AI", icon: "fas fa-user-circle", keywords: ["remove", "background", "ai", "transparent"], isNew: true, isFeatured: true },
                    { name: "Image to PDF", desc: "Convert single or multiple images to PDF documents", icon: "fas fa-file-pdf", keywords: ["image", "pdf", "convert", "document"], isNew: false, isFeatured: true },
                    { name: "Photo Size Adjust", desc: "Adjust photo size for ID cards, passports, and documents", icon: "fas fa-expand-alt", keywords: ["photo", "size", "adjust", "id card"], isNew: true, isFeatured: false },
                    { name: "Remove Object from Photo", desc: "Remove unwanted objects from photos seamlessly", icon: "fas fa-eraser", keywords: ["remove", "object", "photo", "erase"], isNew: true, isFeatured: false }
                ],
                "documentToolsGrid": [
                    { name: "PDF to Word", desc: "Convert PDF documents to editable Word files", icon: "fas fa-file-word", keywords: ["pdf", "word", "convert", "document"], isNew: false, isFeatured: true },
                    { name: "ZIP to PDF", desc: "Convert ZIP files to PDF documents", icon: "fas fa-file-archive", keywords: ["zip", "pdf", "convert", "archive"], isNew: true, isFeatured: false },
                    { name: "PDF to ZIP", desc: "Convert PDF documents to ZIP archives", icon: "fas fa-file-zipper", keywords: ["pdf", "zip", "convert", "archive"], isNew: true, isFeatured: false },
                    { name: "ID Card Maker", desc: "Create professional ID cards", icon: "fas fa-id-card", keywords: ["id", "card", "maker", "create"], isNew: true, isFeatured: true }
                ],
                "newToolsGrid": [
                    { name: "Remove Background", desc: "Automatically remove background from images with AI technology", icon: "fas fa-user-circle", keywords: ["background", "remove", "ai", "photo"], isNew: true, isFeatured: true },
                    { name: "Remove Object from Photo", desc: "Remove unwanted objects or people from photos", icon: "fas fa-eraser", keywords: ["object", "remove", "photo", "erase"], isNew: true, isFeatured: false },
                    { name: "Photo Size Adjust", desc: "Adjust photo size for ID cards and passports", icon: "fas fa-ruler-combined", keywords: ["photo", "size", "adjust", "id"], isNew: true, isFeatured: false },
                    { name: "ID Card Maker", desc: "Create professional ID cards with templates", icon: "fas fa-id-card", keywords: ["id", "card", "maker", "create"], isNew: true, isFeatured: true }
                ],
                "calculatorToolsGrid": [
                    { name: "Scientific Calculator", desc: "Advanced calculator for complex math", icon: "fas fa-calculator", keywords: ["calculator", "scientific", "math", "calculate"], isNew: false, isFeatured: false },
                    { name: "BMI Calculator", desc: "Calculate Body Mass Index", icon: "fas fa-weight-scale", keywords: ["bmi", "calculator", "health", "weight"], isNew: false, isFeatured: false }
                ],
                "textToolsGrid": [
                    { name: "Word Counter", desc: "Count words, characters, and sentences", icon: "fas fa-text-height", keywords: ["word", "counter", "count", "text"], isNew: false, isFeatured: false },
                    { name: "Text Case Converter", desc: "Convert text between different cases", icon: "fas fa-font", keywords: ["text", "case", "convert", "uppercase"], isNew: false, isFeatured: false }
                ],
                "webToolsGrid": [
                    { name: "HTML Editor", desc: "Online HTML code editor", icon: "fas fa-code", keywords: ["html", "editor", "code", "web"], isNew: false, isFeatured: false },
                    { name: "CSS Generator", desc: "Generate CSS code easily", icon: "fas fa-paint-brush", keywords: ["css", "generator", "code", "style"], isNew: false, isFeatured: false }
                ],
                "utilityToolsGrid": [
                    { name: "QR Code Generator", desc: "Create QR codes for URLs and text", icon: "fas fa-qrcode", keywords: ["qr", "code", "generator", "create"], isNew: false, isFeatured: true },
                    { name: "QR Code Scanner", desc: "Scan QR codes using camera", icon: "fas fa-camera", keywords: ["qr", "code", "scanner", "read"], isNew: false, isFeatured: false }
                ]
            };
            
            saveToolsData(defaultTools);
            showSaveStatus('Default tools loaded successfully!', 'success', 'toolsSaveStatus');
            loadToolsTable();
            
            // Set default featured tools
            const defaultFeaturedTools = [
                "Remove Background",
                "Image to PDF",
                "PDF to Word",
                "ID Card Maker",
                "QR Code Generator",
                "Remove Object from Photo"
            ];
            localStorage.setItem('websiteFeaturedTools', JSON.stringify(defaultFeaturedTools));
        }
        
        // ==================== TOOL MODAL FUNCTIONS ====================
        
        function openToolModal(isEdit = false, categoryId = null, toolIndex = null) {
            const modal = document.getElementById('toolModal');
            const title = document.getElementById('modalTitle');
            
            if (isEdit && categoryId !== null && toolIndex !== null) {
                title.textContent = 'Edit Tool';
                document.getElementById('editToolIndex').value = toolIndex;
                document.getElementById('editToolCategory').value = categoryId;
                
                const toolsData = getToolsData();
                const tool = toolsData[categoryId][toolIndex];
                
                if (tool) {
                    document.getElementById('toolName').value = tool.name || '';
                    document.getElementById('toolDescription').value = tool.desc || '';
                    document.getElementById('toolIcon').value = tool.icon || 'fas fa-wrench';
                    document.getElementById('toolKeywords').value = tool.keywords || '';
                    document.getElementById('isNewTool').checked = tool.isNew || false;
                    document.getElementById('isFeaturedTool').checked = tool.isFeatured || false;
                    
                    // Load tool image preview
                    const preview = document.getElementById('toolImagePreview');
                    const deleteBtn = preview.nextElementSibling;
                    if (tool.image) {
                        preview.src = tool.image;
                        preview.classList.add('show');
                        deleteBtn.style.display = 'flex';
                    } else {
                        preview.classList.remove('show');
                        deleteBtn.style.display = 'none';
                    }
                }
            } else {
                title.textContent = 'Add New Tool';
                document.getElementById('toolForm').reset();
                document.getElementById('toolIcon').value = 'fas fa-wrench';
                document.getElementById('toolImagePreview').classList.remove('show');
                document.getElementById('toolImagePreview').nextElementSibling.style.display = 'none';
                document.getElementById('editToolIndex').value = '';
                document.getElementById('editToolCategory').value = '';
            }
            
            // Populate categories dropdown
            const categorySelect = document.getElementById('toolCategory');
            categorySelect.innerHTML = '';
            
            const categories = getCategories();
            categories.forEach(category => {
                const option = document.createElement('option');
                option.value = category.id;
                option.textContent = category.name;
                categorySelect.appendChild(option);
            });
            
            if (isEdit && categories.length > 0 && categoryId) {
                categorySelect.value = categoryId;
            } else if (!isEdit && categories.length > 0) {
                categorySelect.value = categories[0].id;
            }
            
            modal.style.display = 'flex';
        }
        
        function closeToolModal() {
            document.getElementById('toolModal').style.display = 'none';
        }
        
        function handleToolFormSubmit(e) {
            e.preventDefault();
            
            const toolName = document.getElementById('toolName').value.trim();
            const toolCategory = document.getElementById('toolCategory').value;
            const toolDescription = document.getElementById('toolDescription').value.trim();
            const toolIcon = document.getElementById('toolIcon').value.trim();
            const toolKeywords = document.getElementById('toolKeywords').value.trim();
            const isNewTool = document.getElementById('isNewTool').checked;
            const isFeaturedTool = document.getElementById('isFeaturedTool').checked;
            const editIndex = document.getElementById('editToolIndex').value;
            const editCategory = document.getElementById('editToolCategory').value;
            const toolImagePreview = document.getElementById('toolImagePreview');
            
            if (!toolName || !toolCategory || !toolDescription || !toolIcon) {
                alert('Please fill all required fields (*)');
                return;
            }
            
            let toolsData = getToolsData();
            if (!toolsData[toolCategory]) {
                toolsData[toolCategory] = [];
            }
            
            const newTool = {
                name: toolName,
                desc: toolDescription,
                icon: toolIcon,
                keywords: toolKeywords ? toolKeywords.split(',').map(k => k.trim()) : [],
                isNew: isNewTool,
                isFeatured: isFeaturedTool,
                image: toolImagePreview.classList.contains('show') ? toolImagePreview.src : null
            };
            
            if (editIndex !== '' && editCategory !== '') {
                // Edit existing tool
                toolsData[editCategory][editIndex] = newTool;
                
                // If category changed, move tool to new category
                if (editCategory !== toolCategory) {
                    toolsData[toolCategory].push(newTool);
                    toolsData[editCategory].splice(editIndex, 1);
                }
            } else {
                // Add new tool
                toolsData[toolCategory].push(newTool);
            }
            
            saveToolsData(toolsData);
            
            closeToolModal();
            loadToolsTable();
            showSaveStatus('Tool saved successfully!', 'success', 'toolsSaveStatus');
            
            // Auto-sync if featured tool changed
            if (isFeaturedTool) {
                updateFeaturedToolsList();
            }
        }
        
        function editTool(categoryId, index) {
            openToolModal(true, categoryId, index);
        }
        
        function deleteTool(categoryId, index) {
            if (!confirm('Are you sure you want to delete this tool?')) {
                return;
            }
            
            let toolsData = getToolsData();
            if (toolsData[categoryId] && toolsData[categoryId][index]) {
                const toolName = toolsData[categoryId][index].name;
                
                // Remove from featured tools if present
                const featuredTools = JSON.parse(localStorage.getItem('websiteFeaturedTools') || '[]');
                const updatedFeatured = featuredTools.filter(name => name !== toolName);
                localStorage.setItem('websiteFeaturedTools', JSON.stringify(updatedFeatured));
                
                toolsData[categoryId].splice(index, 1);
                saveToolsData(toolsData);
                
                loadToolsTable();
                showSaveStatus('Tool deleted successfully!', 'success', 'toolsSaveStatus');
            }
        }
        
        function handleToolImageUpload(e) {
            const file = e.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(event) {
                const preview = document.getElementById('toolImagePreview');
                const deleteBtn = preview.nextElementSibling;
                preview.src = event.target.result;
                preview.classList.add('show');
                deleteBtn.style.display = 'flex';
            };
            reader.readAsDataURL(file);
        }
        
        function removeToolImageInModal(e) {
            e.stopPropagation();
            const preview = document.getElementById('toolImagePreview');
            const deleteBtn = preview.nextElementSibling;
            preview.src = '';
            preview.classList.remove('show');
            deleteBtn.style.display = 'none';
        }
        
        // ==================== FEATURED TOOLS MANAGEMENT ====================
        
        function loadFeaturedToolsSelector() {
            const container = document.getElementById('featuredToolsList');
            if (!container) return;
            
            container.innerHTML = '';
            
            const toolsData = getToolsData();
            const featuredTools = JSON.parse(localStorage.getItem('websiteFeaturedTools') || '[]');
            
            let allTools = [];
            for (const categoryId in toolsData) {
                toolsData[categoryId].forEach(tool => {
                    allTools.push(tool);
                });
            }
            
            if (allTools.length === 0) {
                container.innerHTML = '<p>No tools available. Add some tools first.</p>';
                return;
            }
            
            // Sort tools by name
            allTools.sort((a, b) => a.name.localeCompare(b.name));
            
            allTools.forEach(tool => {
                const isFeatured = featuredTools.includes(tool.name);
                const div = document.createElement('div');
                div.className = 'tool-checkbox';
                div.innerHTML = `
                    <input type="checkbox" id="featured_${tool.name.replace(/\s+/g, '_')}" 
                           ${isFeatured ? 'checked' : ''} 
                           data-tool-name="${tool.name}"
                           onchange="updateFeaturedSelection()">
                    <label for="featured_${tool.name.replace(/\s+/g, '_')}" style="flex: 1; cursor: pointer;">
                        <strong>${tool.name}</strong>
                        <div style="font-size: 0.85rem; color: #64748b;">${tool.desc.substring(0, 60)}${tool.desc.length > 60 ? '...' : ''}</div>
                    </label>
                    <i class="${tool.icon}" style="color: #2563eb;"></i>
                `;
                container.appendChild(div);
            });
            
            updateFeaturedCount();
        }
        
        function updateFeaturedSelection() {
            updateFeaturedCount();
        }
        
        function updateFeaturedCount() {
            const checkboxes = document.querySelectorAll('#featuredToolsList input[type="checkbox"]:checked');
            const count = checkboxes.length;
            const statusElement = document.getElementById('featuredSaveStatus');
            
            if (statusElement) {
                statusElement.textContent = `${count} tools selected (Max: 6)`;
                statusElement.className = `save-status ${count <= 6 ? 'success' : 'error'}`;
                statusElement.style.display = 'flex';
                
                if (count > 6) {
                    statusElement.innerHTML = `<i class="fas fa-exclamation-triangle"></i> Too many tools selected! Maximum is 6.`;
                }
            }
        }
        
        function saveFeaturedTools() {
            const checkboxes = document.querySelectorAll('#featuredToolsList input[type="checkbox"]:checked');
            
            if (checkboxes.length > 6) {
                alert('Maximum 6 tools can be featured. Please select fewer tools.');
                return;
            }
            
            const featuredTools = Array.from(checkboxes).map(cb => cb.getAttribute('data-tool-name'));
            localStorage.setItem('websiteFeaturedTools', JSON.stringify(featuredTools));
            
            showSaveStatus('Featured tools saved successfully!', 'success', 'featuredSaveStatus');
            updateDashboard();
            
            // Auto-sync
            syncToWebsite();
        }
        
        function updateFeaturedToolsList() {
            const toolsData = getToolsData();
            const currentFeatured = JSON.parse(localStorage.getItem('websiteFeaturedTools') || '[]');
            const updatedFeatured = [];
            
            // Get all featured tools from data
            for (const categoryId in toolsData) {
                toolsData[categoryId].forEach(tool => {
                    if (tool.isFeatured && !updatedFeatured.includes(tool.name)) {
                        updatedFeatured.push(tool.name);
                    }
                });
            }
            
            // Add any existing featured tools that might not be marked as featured in data
            currentFeatured.forEach(toolName => {
                if (!updatedFeatured.includes(toolName)) {
                    updatedFeatured.push(toolName);
                }
            });
            
            // Limit to 6 tools
            const finalFeatured = updatedFeatured.slice(0, 6);
            localStorage.setItem('websiteFeaturedTools', JSON.stringify(finalFeatured));
        }
        
        // ==================== LOGO & BRANDING ====================
        
        function loadBranding() {
            const settings = getSettings();
            document.getElementById('logoText').value = settings.logoText || 'Tools Bathinda';
            document.getElementById('logoIcon').value = settings.logoIcon || 'fas fa-tools';
            document.getElementById('heroTitle').value = settings.heroTitle || 'Advanced Digital Toolkit for Everyday Tasks';
            document.getElementById('heroSubtitle').value = settings.heroSubtitle || 'Convert, compress, edit, and optimize your files with our powerful collection of free online tools. No installation required.';
            
            // Load logo preview
            const logoData = localStorage.getItem('websiteLogo');
            const logoPreview = document.getElementById('logoPreview');
            const deleteLogoBtn = document.getElementById('deleteLogoBtn');
            
            if (logoData) {
                logoPreview.src = logoData;
                logoPreview.classList.add('show');
                deleteLogoBtn.style.display = 'flex';
            } else {
                logoPreview.classList.remove('show');
                deleteLogoBtn.style.display = 'none';
            }
            
            // Load favicon preview
            const faviconData = localStorage.getItem('websiteFavicon');
            const faviconPreview = document.getElementById('faviconPreview');
            const deleteFaviconBtn = document.getElementById('deleteFaviconBtn');
            
            if (faviconData) {
                faviconPreview.src = faviconData;
                faviconPreview.classList.add('show');
                deleteFaviconBtn.style.display = 'flex';
            } else {
                faviconPreview.classList.remove('show');
                deleteFaviconBtn.style.display = 'none';
            }
        }
        
        function handleLogoUpload(e) {
            const file = e.target.files[0];
            if (!file) return;
            
            if (!file.type.match('image.*')) {
                alert('Please select an image file');
                return;
            }
            
            const reader = new FileReader();
            reader.onload = function(event) {
                const logoPreview = document.getElementById('logoPreview');
                const deleteBtn = document.getElementById('deleteLogoBtn');
                logoPreview.src = event.target.result;
                logoPreview.classList.add('show');
                deleteBtn.style.display = 'flex';
                localStorage.setItem('websiteLogo', event.target.result);
                showSaveStatus('Logo uploaded successfully!', 'success', 'brandingSaveStatus');
            };
            reader.readAsDataURL(file);
        }
        
        function handleFaviconUpload(e) {
            const file = e.target.files[0];
            if (!file) return;
            
            if (!file.type.match('image.*')) {
                alert('Please select an image file');
                return;
            }
            
            const reader = new FileReader();
            reader.onload = function(event) {
                const faviconPreview = document.getElementById('faviconPreview');
                const deleteBtn = document.getElementById('deleteFaviconBtn');
                faviconPreview.src = event.target.result;
                faviconPreview.classList.add('show');
                deleteBtn.style.display = 'flex';
                localStorage.setItem('websiteFavicon', event.target.result);
                showSaveStatus('Favicon uploaded successfully!', 'success', 'brandingSaveStatus');
            };
            reader.readAsDataURL(file);
        }
        
        function deleteLogo() {
            if (!confirm('Are you sure you want to delete the logo?')) return;
            
            localStorage.removeItem('websiteLogo');
            const logoPreview = document.getElementById('logoPreview');
            const deleteBtn = document.getElementById('deleteLogoBtn');
            logoPreview.src = '';
            logoPreview.classList.remove('show');
            deleteBtn.style.display = 'none';
            
            showSaveStatus('Logo deleted successfully!', 'success', 'brandingSaveStatus');
        }
        
        function deleteFavicon() {
            if (!confirm('Are you sure you want to delete the favicon?')) return;
            
            localStorage.removeItem('websiteFavicon');
            const faviconPreview = document.getElementById('faviconPreview');
            const deleteBtn = document.getElementById('deleteFaviconBtn');
            faviconPreview.src = '';
            faviconPreview.classList.remove('show');
            deleteBtn.style.display = 'none';
            
            showSaveStatus('Favicon deleted successfully!', 'success', 'brandingSaveStatus');
        }
        
        function saveBranding() {
            const settings = getSettings();
            settings.logoText = document.getElementById('logoText').value;
            settings.logoIcon = document.getElementById('logoIcon').value;
            settings.heroTitle = document.getElementById('heroTitle').value;
            settings.heroSubtitle = document.getElementById('heroSubtitle').value;
            
            saveSettings(settings);
            showSaveStatus('Branding saved successfully!', 'success', 'brandingSaveStatus');
            
            // Auto-sync
            syncToWebsite();
        }
        
        // ==================== CATEGORY MANAGEMENT ====================
        
        function loadCategories() {
            const container = document.getElementById('categorySortable');
            if (!container) return;
            
            container.innerHTML = '';
            const categories = getCategories();
            
            if (categories.length === 0) {
                const defaultCategories = [
                    { id: "imageToolsGrid", name: "Image Tools", icon: "fas fa-image", order: 1 },
                    { id: "documentToolsGrid", name: "Document Tools", icon: "fas fa-file-alt", order: 2 },
                    { id: "newToolsGrid", name: "New Tools", icon: "fas fa-star", order: 3 },
                    { id: "calculatorToolsGrid", name: "Calculator Tools", icon: "fas fa-calculator", order: 4 },
                    { id: "textToolsGrid", name: "Text Tools", icon: "fas fa-font", order: 5 },
                    { id: "webToolsGrid", name: "Developer Tools", icon: "fas fa-code", order: 6 },
                    { id: "utilityToolsGrid", name: "Utility Tools", icon: "fas fa-toolbox", order: 7 }
                ];
                
                defaultCategories.forEach(cat => {
                    categories.push(cat);
                });
                saveCategories(categories);
            }
            
            categories.forEach((category, index) => {
                const categoryDiv = document.createElement('div');
                categoryDiv.className = 'draggable-item';
                categoryDiv.setAttribute('data-id', category.id);
                categoryDiv.style.cssText = `
                    padding: 15px;
                    background: white;
                    border-radius: 10px;
                    margin-bottom: 10px;
                    border: 1px solid #e2e8f0;
                    box-shadow: 0 2px 4px rgba(0,0,0,0.05);
                `;
                categoryDiv.innerHTML = `
                    <div style="display: flex; align-items: center; gap: 15px;">
                        <i class="fas fa-arrows-alt" style="color: #64748b; cursor: move;"></i>
                        <i class="${category.icon}" style="font-size: 1.5rem; color: #2563eb;"></i>
                        <div style="flex: 1;">
                            <div style="font-weight: 600;">${category.name}</div>
                            <div style="font-size: 0.85rem; color: #64748b;">ID: ${category.id}</div>
                            <div style="font-size: 0.85rem; color: #94a3b8;">
                                Tools: ${getToolsData()[category.id] ? getToolsData()[category.id].length : 0}
                            </div>
                        </div>
                        <div class="action-buttons">
                            <button class="action-btn edit" onclick="editCategory('${category.id}')">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="action-btn delete" onclick="deleteCategory('${category.id}')">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                `;
                container.appendChild(categoryDiv);
            });
        }
        
        function saveCategoryOrder() {
            showSaveStatus('Category order saved!', 'success', 'categorySaveStatus');
        }
        
        function openCategoryModal(isEdit = false, categoryId = null) {
            let name = '';
            let icon = 'fas fa-folder';
            let id = '';
            
            if (isEdit) {
                const category = getCategoryById(categoryId);
                name = category.name;
                icon = category.icon;
                id = category.id;
            }
            
            const newName = prompt('Enter category name:', name);
            if (!newName) return;
            
            const newIcon = prompt('Enter icon class (Font Awesome):', icon);
            if (!newIcon) return;
            
            let categories = getCategories();
            
            if (isEdit) {
                const index = categories.findIndex(cat => cat.id === categoryId);
                if (index !== -1) {
                    categories[index].name = newName;
                    categories[index].icon = newIcon;
                }
            } else {
                let newId = prompt('Enter unique ID (matching website grid ID):', newName.toLowerCase().replace(/\s+/g, '') + 'Grid');
                if (!newId) return;
                
                if (categories.some(cat => cat.id === newId)) {
                    alert('Category ID already exists!');
                    return;
                }
                
                categories.push({ id: newId, name: newName, icon: newIcon, order: categories.length + 1 });
            }
            
            saveCategories(categories);
            loadCategories();
            showSaveStatus(`Category ${isEdit ? 'updated' : 'added'}!`, 'success', 'categorySaveStatus');
            
            // Auto-sync
            syncToWebsite();
        }
        
        function editCategory(categoryId) {
            openCategoryModal(true, categoryId);
        }
        
        function deleteCategory(categoryId) {
            if (!confirm('Delete this category and all its tools?')) return;
            
            let categories = getCategories();
            categories = categories.filter(cat => cat.id !== categoryId);
            saveCategories(categories);
            
            let toolsData = getToolsData();
            if (toolsData[categoryId]) {
                delete toolsData[categoryId];
                saveToolsData(toolsData);
            }
            
            loadCategories();
            loadToolsTable();
            showSaveStatus('Category deleted!', 'success', 'categorySaveStatus');
            
            // Auto-sync
            syncToWebsite();
        }
        
        // ==================== OTHER TAB FUNCTIONS ====================
        
        function loadToolIcons() {
            const container = document.getElementById('toolIconsContainer');
            if (!container) return;
            
            container.innerHTML = '<h3>Edit Tool Icons</h3>';
            const toolsData = getToolsData();
            
            for (const categoryId in toolsData) {
                const categoryTools = toolsData[categoryId];
                categoryTools.forEach((tool, index) => {
                    const iconDiv = document.createElement('div');
                    iconDiv.className = 'draggable-item';
                    iconDiv.style.cssText = `
                        padding: 15px;
                        background: white;
                        border-radius: 10px;
                        margin-bottom: 10px;
                        border: 1px solid #e2e8f0;
                    `;
                    iconDiv.innerHTML = `
                        <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 10px;">
                            <i class="${tool.icon}" style="font-size: 1.5rem; color: #2563eb;"></i>
                            <div>
                                <div style="font-weight: 600;">${tool.name}</div>
                                <div style="font-size: 0.85rem; color: #64748b;">${getCategoryName(categoryId)}</div>
                            </div>
                        </div>
                        <input type="text" class="form-control icon-input" 
                            value="${tool.icon}" 
                            data-category="${categoryId}" 
                            data-index="${index}"
                            placeholder="fas fa-icon">
                    `;
                    container.appendChild(iconDiv);
                });
            }
            
            const saveBtn = document.createElement('button');
            saveBtn.className = 'btn btn-success';
            saveBtn.innerHTML = '<i class="fas fa-save"></i> Save All Icon Changes';
            saveBtn.onclick = saveToolIcons;
            saveBtn.style.marginTop = '20px';
            container.appendChild(saveBtn);
        }
        
        function saveToolIcons() {
            const inputs = document.querySelectorAll('.icon-input');
            let toolsData = getToolsData();
            let changed = false;
            
            inputs.forEach(input => {
                const categoryId = input.getAttribute('data-category');
                const index = parseInt(input.getAttribute('data-index'));
                const newIcon = input.value.trim();
                
                if (toolsData[categoryId] && toolsData[categoryId][index] && newIcon) {
                    if (toolsData[categoryId][index].icon !== newIcon) {
                        toolsData[categoryId][index].icon = newIcon;
                        changed = true;
                    }
                }
            });
            
            if (changed) {
                saveToolsData(toolsData);
                showSaveStatus('Icons updated!', 'success', 'iconSaveStatus');
                loadToolsTable();
                
                // Auto-sync
                syncToWebsite();
            }
        }
        
        function loadToolImages() {
            const container = document.getElementById('toolImagesContainer');
            if (!container) return;
            
            container.innerHTML = '<h3>Upload Tool Images</h3>';
            const toolsData = getToolsData();
            
            for (const categoryId in toolsData) {
                const categoryTools = toolsData[categoryId];
                categoryTools.forEach((tool, index) => {
                    const imageDiv = document.createElement('div');
                    imageDiv.className = 'draggable-item';
                    imageDiv.style.cssText = `
                        padding: 15px;
                        background: white;
                        border-radius: 10px;
                        margin-bottom: 10px;
                        border: 1px solid #e2e8f0;
                    `;
                    imageDiv.innerHTML = `
                        <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                            ${tool.image ? 
                                `<img src="${tool.image}" alt="Tool Image" style="width: 40px; height: 40px; border-radius: 8px; object-fit: cover;">` :
                                `<i class="${tool.icon}" style="font-size: 1.5rem; color: #2563eb;"></i>`
                            }
                            <div style="flex: 1;">
                                <div style="font-weight: 600;">${tool.name}</div>
                                <div style="font-size: 0.85rem; color: #64748b;">${getCategoryName(categoryId)}</div>
                            </div>
                        </div>
                        <div style="display: flex; align-items: center; gap: 20px; flex-wrap: wrap;">
                            <div>
                                <button class="btn btn-primary" onclick="uploadToolImage('${categoryId}', ${index})">
                                    <i class="fas fa-upload"></i> Upload Image
                                </button>
                            </div>
                            <div>
                                ${tool.image ? 
                                    `<button class="btn btn-danger" onclick="removeToolImage('${categoryId}', ${index})">
                                        <i class="fas fa-trash"></i> Remove Image
                                     </button>` : 
                                    '<span style="color: #94a3b8;">No image</span>'
                                }
                            </div>
                        </div>
                    `;
                    container.appendChild(imageDiv);
                });
            }
        }
        
        function uploadToolImage(categoryId, index) {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = 'image/*';
            input.onchange = function(e) {
                const file = e.target.files[0];
                if (!file) return;
                
                const reader = new FileReader();
                reader.onload = function(event) {
                    let toolsData = getToolsData();
                    if (toolsData[categoryId] && toolsData[categoryId][index]) {
                        toolsData[categoryId][index].image = event.target.result;
                        saveToolsData(toolsData);
                        showSaveStatus('Image uploaded!', 'success', 'imageSaveStatus');
                        loadToolImages();
                        
                        // Auto-sync
                        syncToWebsite();
                    }
                };
                reader.readAsDataURL(file);
            };
            input.click();
        }
        
        function removeToolImage(categoryId, index) {
            if (!confirm('Remove image from this tool?')) return;
            
            let toolsData = getToolsData();
            if (toolsData[categoryId] && toolsData[categoryId][index]) {
                toolsData[categoryId][index].image = null;
                saveToolsData(toolsData);
                showSaveStatus('Image removed!', 'success', 'imageSaveStatus');
                loadToolImages();
                
                // Auto-sync
                syncToWebsite();
            }
        }
        
        function loadBulkEdit() {
            const categorySelect = document.getElementById('bulkCategory');
            const categories = getCategories();
            
            categorySelect.innerHTML = '<option value="">Select Category</option>';
            categories.forEach(cat => {
                const option = document.createElement('option');
                option.value = cat.id;
                option.textContent = cat.name;
                categorySelect.appendChild(option);
            });
            
            categorySelect.onchange = function() {
                if (this.value) {
                    loadCategoryToolsForBulkEdit(this.value);
                } else {
                    document.getElementById('bulkToolsContainer').innerHTML = '';
                }
            };
        }
        
        function loadCategoryToolsForBulkEdit(categoryId) {
            const container = document.getElementById('bulkToolsContainer');
            container.innerHTML = '';
            
            const toolsData = getToolsData();
            const tools = toolsData[categoryId] || [];
            
            if (tools.length === 0) {
                container.innerHTML = '<p>No tools in this category.</p>';
                return;
            }
            
            tools.forEach((tool, index) => {
                const toolDiv = document.createElement('div');
                toolDiv.className = 'draggable-item';
                toolDiv.style.cssText = `
                    padding: 15px;
                    background: white;
                    border-radius: 10px;
                    margin-bottom: 10px;
                    border: 1px solid #e2e8f0;
                `;
                toolDiv.innerHTML = `
                    <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                        <i class="${tool.icon}" style="font-size: 1.5rem; color: #2563eb;"></i>
                        <div style="flex: 1;">
                            <input type="text" class="form-control bulk-tool-name" 
                                value="${tool.name}" 
                                data-category="${categoryId}" 
                                data-index="${index}"
                                placeholder="Tool Name"
                                style="margin-bottom: 10px;">
                            <textarea class="form-control bulk-tool-desc" 
                                data-category="${categoryId}" 
                                data-index="${index}"
                                placeholder="Tool Description"
                                rows="2">${tool.desc}</textarea>
                        </div>
                    </div>
                `;
                container.appendChild(toolDiv);
            });
        }
        
        function saveBulkEdit() {
            const nameInputs = document.querySelectorAll('.bulk-tool-name');
            const descInputs = document.querySelectorAll('.bulk-tool-desc');
            let toolsData = getToolsData();
            let changed = false;
            
            nameInputs.forEach(input => {
                const categoryId = input.getAttribute('data-category');
                const index = parseInt(input.getAttribute('data-index'));
                const newName = input.value.trim();
                
                if (toolsData[categoryId] && toolsData[categoryId][index] && newName) {
                    if (toolsData[categoryId][index].name !== newName) {
                        toolsData[categoryId][index].name = newName;
                        changed = true;
                    }
                }
            });
            
            descInputs.forEach(input => {
                const categoryId = input.getAttribute('data-category');
                const index = parseInt(input.getAttribute('data-index'));
                const newDesc = input.value.trim();
                
                if (toolsData[categoryId] && toolsData[categoryId][index] && newDesc) {
                    if (toolsData[categoryId][index].desc !== newDesc) {
                        toolsData[categoryId][index].desc = newDesc;
                        changed = true;
                    }
                }
            });
            
            if (changed) {
                saveToolsData(toolsData);
                showSaveStatus('Bulk changes saved!', 'success', 'toolsSaveStatus');
                loadToolsTable();
                
                // Auto-sync
                syncToWebsite();
            }
        }
        
        // ==================== OTHER SECTIONS ====================
        
        function loadFooterEditor() {
            const settings = getSettings();
            document.getElementById('footerTagline').value = settings.footerTagline || '';
            document.getElementById('footerCopyright').value = settings.footerCopyright || '';
        }
        
        function saveFooter() {
            const settings = getSettings();
            settings.footerTagline = document.getElementById('footerTagline').value;
            settings.footerCopyright = document.getElementById('footerCopyright').value;
            
            saveSettings(settings);
            showSaveStatus('Footer saved successfully!', 'success', 'footerSaveStatus');
            
            // Auto-sync
            syncToWebsite();
        }
        
        function loadWebsiteSettings() {
            const settings = getSettings();
            document.getElementById('siteTitle').value = settings.siteTitle || '';
            document.getElementById('contactEmail').value = settings.contactEmail || '';
            document.getElementById('metaDescription').value = settings.metaDescription || '';
            document.getElementById('metaKeywords').value = settings.metaKeywords || '';
        }
        
        function saveWebsiteSettings() {
            const settings = getSettings();
            settings.siteTitle = document.getElementById('siteTitle').value;
            settings.contactEmail = document.getElementById('contactEmail').value;
            settings.metaDescription = document.getElementById('metaDescription').value;
            settings.metaKeywords = document.getElementById('metaKeywords').value;
            
            saveSettings(settings);
            showSaveStatus('Website settings saved!', 'success', 'settingsSaveStatus');
            
            // Auto-sync
            syncToWebsite();
        }
        
        function loadAdminSecurity() {
            const username = localStorage.getItem('adminUsername') || 'admin';
            const timeout = localStorage.getItem('sessionTimeout') || '8';
            
            document.getElementById('adminUsername').value = username;
            document.getElementById('sessionTimeout').value = timeout;
        }
        
        function saveAdminSettings() {
            const currentPassword = document.getElementById('currentPassword').value;
            const newPassword = document.getElementById('newPassword').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            const newUsername = document.getElementById('adminUsername').value.trim();
            const sessionTimeout = document.getElementById('sessionTimeout').value;
            
            // Validate current password
            const storedPassword = localStorage.getItem('adminPassword') || 'Raju1102';
            if (currentPassword !== storedPassword) {
                alert('Current password is incorrect!');
                return;
            }
            
            // Validate new password
            if (newPassword && newPassword !== confirmPassword) {
                alert('New passwords do not match!');
                return;
            }
            
            // Save changes
            if (newUsername) {
                localStorage.setItem('adminUsername', newUsername);
            }
            
            if (newPassword) {
                localStorage.setItem('adminPassword', newPassword);
            }
            
            localStorage.setItem('sessionTimeout', sessionTimeout);
            
            // Clear password fields
            document.getElementById('currentPassword').value = '';
            document.getElementById('newPassword').value = '';
            document.getElementById('confirmPassword').value = '';
            
            showSaveStatus('Admin settings saved successfully!', 'success', 'adminSaveStatus');
        }
        
        function updateBackupInfo() {
            const toolsData = getToolsData();
            let totalTools = 0;
            for (const category in toolsData) {
                totalTools += toolsData[category].length;
            }
            
            document.getElementById('backupToolsCount').textContent = totalTools;
            document.getElementById('backupCategoriesCount').textContent = getCategories().length;
            
            const lastBackup = localStorage.getItem('lastBackupDate');
            document.getElementById('lastBackupDate').textContent = lastBackup ? new Date(lastBackup).toLocaleString() : 'Never';
            
            const lastSync = localStorage.getItem('lastSyncDate');
            if (lastSync) {
                document.getElementById('lastSyncDate').textContent = new Date(lastSync).toLocaleString();
            }
        }
        
        function downloadBackup() {
            const backupData = {
                toolsData: getToolsData(),
                categories: getCategories(),
                settings: getSettings(),
                featuredTools: JSON.parse(localStorage.getItem('websiteFeaturedTools') || '[]'),
                backupDate: new Date().toISOString()
            };
            
            const dataStr = JSON.stringify(backupData, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            
            const a = document.createElement('a');
            a.href = URL.createObjectURL(dataBlob);
            a.download = `tools-backup-${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            
            localStorage.setItem('lastBackupDate', new Date().toISOString());
            updateBackupInfo();
            showSaveStatus('Backup downloaded successfully!', 'success');
        }
        
        function restoreBackup() {
            const fileInput = document.getElementById('restoreFile');
            const file = fileInput.files[0];
            
            if (!file) {
                alert('Please select a backup file');
                return;
            }
            
            if (!confirm('WARNING: This will replace all current data. Are you sure?')) {
                return;
            }
            
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const backupData = JSON.parse(e.target.result);
                    
                    if (!backupData.toolsData) {
                        throw new Error('Invalid backup file');
                    }
                    
                    saveToolsData(backupData.toolsData);
                    saveCategories(backupData.categories || []);
                    saveSettings(backupData.settings || {});
                    
                    if (backupData.featuredTools) {
                        localStorage.setItem('websiteFeaturedTools', JSON.stringify(backupData.featuredTools));
                    }
                    
                    if (backupData.backupDate) {
                        localStorage.setItem('lastBackupDate', backupData.backupDate);
                    }
                    
                    updateBackupInfo();
                    loadToolsTable();
                    loadCategories();
                    updateDashboard();
                    
                    showSaveStatus('Backup restored successfully!', 'success');
                    
                    // Auto-sync
                    syncToWebsite();
                    
                } catch (error) {
                    alert('Error: ' + error.message);
                }
            };
            reader.readAsText(file);
        }
        
        // ==================== SYNC FUNCTION ====================
        
        function syncToWebsite() {
            // Save all current data to website storage
            const toolsData = getToolsData();
            const categories = getCategories();
            const settings = getSettings();
            const featuredTools = JSON.parse(localStorage.getItem('websiteFeaturedTools') || '[]');
            
            // Save to website storage
            localStorage.setItem('websiteToolsData', JSON.stringify(toolsData));
            localStorage.setItem('websiteCategories', JSON.stringify(categories));
            localStorage.setItem('websiteSettings', JSON.stringify(settings));
            localStorage.setItem('websiteFeaturedTools', JSON.stringify(featuredTools));
            
            // Save sync timestamp
            localStorage.setItem('lastSyncDate', new Date().toISOString());
            
            // Show notification
            showNotification('All changes synced to website successfully!', 'success');
            
            // Update dashboard
            updateDashboard();
            
            // Trigger storage event for main website
            window.dispatchEvent(new StorageEvent('storage', {
                key: 'websiteToolsData',
                newValue: JSON.stringify(toolsData)
            }));
            
            console.log('Data synced to website');
        }
        
        function showNotification(message, type = 'success') {
            // Remove existing notifications
            document.querySelectorAll('.notification').forEach(n => n.remove());
            
            // Create notification element
            const notification = document.createElement('div');
            notification.className = `notification`;
            notification.innerHTML = `
                <i class="fas fa-${type === 'success' ? 'check-circle' : 'info-circle'}"></i>
                <span>${message}</span>
                <button onclick="this.parentElement.remove()" style="background: none; border: none; color: white; cursor: pointer; margin-left: 10px;">&times;</button>
            `;
            
            notification.style.background = type === 'success' ? 'var(--success-color)' : 'var(--primary-color)';
            
            document.body.appendChild(notification);
            
            // Remove after 5 seconds
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.style.animation = 'slideOut 0.3s ease';
                    setTimeout(() => notification.remove(), 300);
                }
            }, 5000);
        }
        
        // ==================== DATA STORAGE HELPERS ====================
        
        function getToolsData() {
            // Try to get from admin storage first, then from website storage
            const adminData = localStorage.getItem('adminToolsData');
            const websiteData = localStorage.getItem('websiteToolsData');
            
            if (adminData) {
                return JSON.parse(adminData);
            } else if (websiteData) {
                return JSON.parse(websiteData);
            } else {
                return {};
            }
        }
        
        function saveToolsData(data) {
            // Save to both admin and website storage
            localStorage.setItem('adminToolsData', JSON.stringify(data));
            localStorage.setItem('websiteToolsData', JSON.stringify(data));
        }
        
        function getCategories() {
            const adminData = localStorage.getItem('adminCategories');
            const websiteData = localStorage.getItem('websiteCategories');
            
            if (adminData) {
                return JSON.parse(adminData);
            } else if (websiteData) {
                return JSON.parse(websiteData);
            } else {
                return [];
            }
        }
        
        function saveCategories(data) {
            localStorage.setItem('adminCategories', JSON.stringify(data));
            localStorage.setItem('websiteCategories', JSON.stringify(data));
        }
        
        function getSettings() {
            const adminData = localStorage.getItem('adminSettings');
            const websiteData = localStorage.getItem('websiteSettings');
            const defaultSettings = {
                siteTitle: 'Tools Bathinda - Free Online Tools',
                contactEmail: 'rk3180243@gmail.com',
                metaDescription: 'Free online tools for image editing, document conversion, text processing, calculations and more.',
                metaKeywords: 'tools, online tools, free tools, image tools, document converter',
                logoText: 'Tools Bathinda',
                logoIcon: 'fas fa-tools',
                heroTitle: 'Advanced Digital Toolkit for Everyday Tasks',
                heroSubtitle: 'Convert, compress, edit, and optimize your files with our powerful collection of free online tools. No installation required.',
                footerTagline: 'Simplifying your digital life with powerful, easy-to-use tools for everyday tasks.',
                footerCopyright: 'Â© 2023 Tools Bathinda. All rights reserved.'
            };
            
            if (adminData) {
                return { ...defaultSettings, ...JSON.parse(adminData) };
            } else if (websiteData) {
                return { ...defaultSettings, ...JSON.parse(websiteData) };
            } else {
                return defaultSettings;
            }
        }
        
        function saveSettings(data) {
            localStorage.setItem('adminSettings', JSON.stringify(data));
            localStorage.setItem('websiteSettings', JSON.stringify(data));
        }
        
        function getCategoryName(categoryId) {
            const categories = getCategories();
            const category = categories.find(cat => cat.id === categoryId);
            return category ? category.name : categoryId;
        }
        
        function getCategoryById(categoryId) {
            const categories = getCategories();
            return categories.find(cat => cat.id === categoryId) || { name: '', icon: '' };
        }
        
        function showSaveStatus(message, type = 'success', elementId = 'saveStatus') {
            const statusElement = document.getElementById(elementId);
            if (statusElement) {
                statusElement.textContent = message;
                statusElement.className = `save-status ${type}`;
                statusElement.style.display = 'flex';
                
                setTimeout(() => {
                    statusElement.style.display = 'none';
                }, 3000);
            }
        }
        
        // Auto setup if no data
        if (!localStorage.getItem('adminToolsData')) {
            setTimeout(loadDefaultTools, 1000);
        }
        
        
    </script>

</body>
</html>